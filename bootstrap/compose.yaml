---
services:
  tftp:
    build:
      context: ./tftp
      args:
        - HTTP_SCHEME=$HTTP_SCHEME
        - HTTP_SERVER=$HTTP_SERVER
        - HTTP_PORT=$HTTP_PORT
    container_name: tftp
    env_file: .env
    restart: unless-stopped
    ports:
      - 69:69/udp

  http:
    build:
      context: ./http
      args:
        - TALOS_VERSION=$TALOS_VERSION
        - HTTP_SCHEME=$HTTP_SCHEME
        - HTTP_SERVER=$HTTP_SERVER
        - HTTP_PORT=$HTTP_PORT
    container_name: http
    env_file: .env
    restart: unless-stopped
    ports:
      - 8888:80
    volumes:
      - ./data/http/controlplane.yaml:/usr/share/nginx/html/talos/controlplane.yaml:ro
