---
services:
  tftp:
    build:
      context: ./tftp
      args:
        - HTTP_SCHEME=http
        - HTTP_SERVER=pxe.deedoubledub.com
        - HTTP_PORT=8888
    container_name: tftp
    restart: unless-stopped
    ports:
      - 69:69/udp

  http:
    build:
      context: ./http
      args:
        - TALOS_VERSION=v0.14.2
        - HTTP_SCHEME=http
        - HTTP_SERVER=pxe.deedoubledub.com
        - HTTP_PORT=8888
    container_name: http
    restart: unless-stopped
    ports:
      - 8888:80
    volumes:
      - ./data/http/controlplane.yaml:/usr/share/nginx/html/talos/controlplane.yaml:ro
