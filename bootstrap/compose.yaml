---
services:
  tftp:
    build:
      context: ./tftp
    container_name: homelab-tftp
    restart: unless-stopped
    environment:
      - TALOS_VERSION=v1.2.1
      - TALOS_VMLINUZ_CHECKSUM=ee89026cf55c0e86f97b2508be5ba92e0b98c6a9adb020860cc5c936cb8b201e
      - TALOS_INITRAMFS_CHECKSUM=e06a710aad5efeb26f8110a66c62e51128476f0ef6a9e9d2750be83e1a527940
      - GRUB_CHECKSUM=d3746a2bc6e50b324094be32a07b2d30a3eac56ffbf65c75e86eda5a6d0a774c
      - GRUBCONF_CHECKSUM=c4662d88e291dbab127428b27c74a2b5e6edfeaba56ffd55e8d82f4a2da39a54
    ports:
      - 69:69/udp
    volumes:
      - ./config/tftp:/var/lib/tftpboot

  http:
    image: nginx:1.23-alpine
    container_name: homelab-http
    restart: unless-stopped
    ports:
      - 8888:80
    volumes:
      - ./config/http:/usr/share/nginx/html/talos
